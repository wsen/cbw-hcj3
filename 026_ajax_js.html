<!DOCTYPE html>
<html>
	<head>
		<title>026_ajax.js</title>
		<meta charset="utf-8" />
		<link href="./styles/global_style.css" type="text/css" rel="stylesheet" media="screen" />
		<script src="../script/jquery-3.3.1.min.js"></script>
		<style>		
		</style>
	</head>
	
	<body>
        <h1>026 Ajax Rechner</h1>
        
        <!-- <form action="../script/ajax_rechner.php;" id="mathForm" name="mathForm"> -->            
        <form id="myForm" name="mathForm">
            <input type="text" name="z1" id="z1" />
            <select id="rArt">
                <option value="add">plus</option>
                <option value="min">minus</option>
                <option value="mal">mal</option>
                <option value="geteilt">geteilt</option>
            </select>
            <input type="text" name="z2" id="z2" />
            <hr />
            <input readonly type="text" id="erg"  /><!-- name="erg" --> 
            <button id="btn" type="button" onclick="foo();"> Rechne </button>
        </form>
		
    <script>
        window.onLoad = function() {
            document.getElementById('btn').addEventListener('click',foo,false);
        }

        var xmlhttp;
			// IE7+, Firefox, Chrome, Opera, Safari
        if(window.XMLHttpRequest) {
            xmlhttp = new XMLHttpRequest();
        } else { // I5 & IE6
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }

        function foo () {
            var z1 = document.getElementById("z1").value;
            var z2 = document.getElementById("z2").value;
            var rArt = document.getElementById("rArt").value;
                
            var sendStr = "?z1=" + z1 + "&z2=" + z2 + "&rArt=" + rArt;
            var sendStr2 = $("#myForm").serialize();
            console.log(sendStr);
            console.log("--");
            console.log(sendStr2);
            xmlhttp.open("GET","../script/ajax_rechner.php" + sendStr,true);
            xmlhttp.onreadystatechange = function() {
                if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                   document.getElementById("erg").value = xmlhttp.responseText;
                }
            };
            xmlhttp.send();
        }          

    </script>
    
    </body>
</html>